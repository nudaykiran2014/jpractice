/*
 * â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•
 *  CORE JAVA - PART 10: MEMORY MANAGEMENT & GARBAGE COLLECTION
 * â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•
 * 
 * STORY TIME ğŸ“–
 * â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€
 * Think of JVM memory like a HOUSE:
 * 
 *   STACK   â†’ Your desk ğŸ—„ï¸ (small, organized, for current work)
 *   HEAP    â†’ Your warehouse ğŸ­ (big, for all your stuff/objects)
 *   
 *   Garbage Collector = Cleaning service that removes unused items from warehouse!
 * 
 */

package corejava;

import java.lang.ref.*;

public class J_Memory_GC {

    public static void main(String[] args) {
        System.out.println("â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•");
        System.out.println("  JAVA MEMORY MANAGEMENT & GARBAGE COLLECTION");
        System.out.println("â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•\n");
        
        jvmMemoryAreas();
        stackVsHeap();
        garbageCollection();
        gcAlgorithms();
        memoryLeaks();
        referenceTypes();
        jvmTuning();
    }

    /*
     * â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•
     * JVM MEMORY AREAS
     * â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•
     */
    static void jvmMemoryAreas() {
        System.out.println("1ï¸âƒ£ JVM MEMORY AREAS");
        System.out.println("â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€\n");
        
        System.out.println("   â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”");
        System.out.println("   â”‚                    JVM MEMORY                           â”‚");
        System.out.println("   â”œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”¤");
        System.out.println("   â”‚                                                         â”‚");
        System.out.println("   â”‚  â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”   â”‚");
        System.out.println("   â”‚  â”‚                    HEAP                          â”‚   â”‚");
        System.out.println("   â”‚  â”‚  (Objects live here - Garbage Collected)        â”‚   â”‚");
        System.out.println("   â”‚  â”‚                                                  â”‚   â”‚");
        System.out.println("   â”‚  â”‚  â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”  â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”  â”‚   â”‚");
        System.out.println("   â”‚  â”‚  â”‚ Young Gen    â”‚  â”‚      Old Generation     â”‚  â”‚   â”‚");
        System.out.println("   â”‚  â”‚  â”‚ Eden + S0/S1 â”‚  â”‚   (Long-lived objects)  â”‚  â”‚   â”‚");
        System.out.println("   â”‚  â”‚  â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜  â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜  â”‚   â”‚");
        System.out.println("   â”‚  â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜   â”‚");
        System.out.println("   â”‚                                                         â”‚");
        System.out.println("   â”‚  â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”  â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”  â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”   â”‚");
        System.out.println("   â”‚  â”‚    STACK     â”‚  â”‚   METASPACE  â”‚  â”‚ Native Mem  â”‚   â”‚");
        System.out.println("   â”‚  â”‚ (Per thread) â”‚  â”‚ (Class meta) â”‚  â”‚ (JNI, etc)  â”‚   â”‚");
        System.out.println("   â”‚  â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜  â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜  â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜   â”‚");
        System.out.println("   â”‚                                                         â”‚");
        System.out.println("   â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜");
        
        System.out.println("\nğŸ“Œ Memory Areas:");
        System.out.println("   â€¢ HEAP: Objects, arrays (GC managed)");
        System.out.println("   â€¢ STACK: Method calls, local variables (per thread)");
        System.out.println("   â€¢ METASPACE: Class metadata (replaced PermGen in Java 8)");
        System.out.println("   â€¢ Native Memory: JNI, direct buffers");
        System.out.println();
    }

    /*
     * â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•
     * STACK vs HEAP
     * â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•
     */
    static void stackVsHeap() {
        System.out.println("2ï¸âƒ£ STACK vs HEAP");
        System.out.println("â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€\n");
        
        System.out.println("   â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”¬â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”");
        System.out.println("   â”‚         STACK          â”‚          HEAP          â”‚");
        System.out.println("   â”œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”¼â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”¤");
        System.out.println("   â”‚ Method calls           â”‚ Objects                â”‚");
        System.out.println("   â”‚ Local variables        â”‚ Instance variables     â”‚");
        System.out.println("   â”‚ Primitive values       â”‚ Arrays                 â”‚");
        System.out.println("   â”‚ Object references      â”‚ Static variables       â”‚");
        System.out.println("   â”œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”¼â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”¤");
        System.out.println("   â”‚ LIFO (Last In First Out)â”‚ No order              â”‚");
        System.out.println("   â”‚ Auto cleaned on exit   â”‚ Garbage collected      â”‚");
        System.out.println("   â”‚ Fast access            â”‚ Slower access          â”‚");
        System.out.println("   â”‚ Thread-specific        â”‚ Shared among threads   â”‚");
        System.out.println("   â”‚ Limited size           â”‚ Larger size            â”‚");
        System.out.println("   â”‚ StackOverflowError     â”‚ OutOfMemoryError       â”‚");
        System.out.println("   â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”´â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜");
        
        // Example
        System.out.println("\nExample:");
        System.out.println("   void method() {");
        System.out.println("       int x = 10;              // x â†’ STACK");
        System.out.println("       String s = \"Hello\";     // s (ref) â†’ STACK, \"Hello\" â†’ HEAP");
        System.out.println("       Person p = new Person(); // p (ref) â†’ STACK, Object â†’ HEAP");
        System.out.println("   }");
        
        System.out.println("\n   â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”      â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”");
        System.out.println("   â”‚     STACK        â”‚      â”‚        HEAP          â”‚");
        System.out.println("   â”‚                  â”‚      â”‚                      â”‚");
        System.out.println("   â”‚   x = 10         â”‚      â”‚  â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”   â”‚");
        System.out.println("   â”‚   s â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”¼â”€â–¶â”‚   \"Hello\"     â”‚   â”‚");
        System.out.println("   â”‚   p â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”¼â”€â–¶â”‚  Person obj   â”‚   â”‚");
        System.out.println("   â”‚                  â”‚      â”‚  â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜   â”‚");
        System.out.println("   â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜      â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜");
        System.out.println();
    }

    /*
     * â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•
     * GARBAGE COLLECTION
     * â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•
     * 
     * STORY: Like a CLEANING SERVICE ğŸ§¹
     * â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€
     *   â€¢ Automatically removes objects no one is using
     *   â€¢ You don't control WHEN it runs
     *   â€¢ You can only SUGGEST with System.gc()
     */
    static void garbageCollection() {
        System.out.println("3ï¸âƒ£ GARBAGE COLLECTION");
        System.out.println("â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€\n");
        
        System.out.println("A) What makes an object eligible for GC?");
        System.out.println("   Object has NO REFERENCES pointing to it.\n");
        
        System.out.println("   // Example 1: Nulling reference");
        System.out.println("   Person p = new Person();");
        System.out.println("   p = null;  // Object now eligible for GC");
        
        System.out.println("\n   // Example 2: Reassigning reference");
        System.out.println("   Person p = new Person(\"A\");");
        System.out.println("   p = new Person(\"B\");  // Person A eligible for GC");
        
        System.out.println("\n   // Example 3: Object created inside method");
        System.out.println("   void method() {");
        System.out.println("       Person p = new Person();");
        System.out.println("   }  // After method ends, object eligible for GC");
        
        System.out.println("\n   // Example 4: Island of isolation");
        System.out.println("   Person p1 = new Person();");
        System.out.println("   Person p2 = new Person();");
        System.out.println("   p1.friend = p2;  p2.friend = p1;");
        System.out.println("   p1 = null; p2 = null;  // Both eligible (circular ref)");
        
        System.out.println("\nB) Heap Generations:");
        System.out.println("   â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”");
        System.out.println("   â”‚              YOUNG GENERATION                         â”‚");
        System.out.println("   â”‚  â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”¬â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”¬â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”            â”‚");
        System.out.println("   â”‚  â”‚      EDEN       â”‚    S0    â”‚    S1    â”‚            â”‚");
        System.out.println("   â”‚  â”‚ (New objects)   â”‚(Survivor)â”‚(Survivor)â”‚            â”‚");
        System.out.println("   â”‚  â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”´â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”´â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜            â”‚");
        System.out.println("   â”‚           â†“ Minor GC (frequent, fast)                 â”‚");
        System.out.println("   â”œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”¤");
        System.out.println("   â”‚              OLD GENERATION                           â”‚");
        System.out.println("   â”‚  â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”  â”‚");
        System.out.println("   â”‚  â”‚     Long-lived objects (survived many GCs)      â”‚  â”‚");
        System.out.println("   â”‚  â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜  â”‚");
        System.out.println("   â”‚           â†“ Major GC (less frequent, slower)          â”‚");
        System.out.println("   â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜");
        
        System.out.println("\nC) GC Process:");
        System.out.println("   1. New objects created in EDEN");
        System.out.println("   2. When Eden full â†’ Minor GC");
        System.out.println("   3. Surviving objects move to Survivor (S0/S1)");
        System.out.println("   4. After surviving many GCs â†’ move to OLD");
        System.out.println("   5. When OLD full â†’ Major GC (Full GC)");
        System.out.println();
    }

    /*
     * â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•
     * GC ALGORITHMS
     * â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•
     */
    static void gcAlgorithms() {
        System.out.println("4ï¸âƒ£ GARBAGE COLLECTOR TYPES");
        System.out.println("â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€\n");
        
        System.out.println("   â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”¬â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”");
        System.out.println("   â”‚  GC Type        â”‚  Description                           â”‚");
        System.out.println("   â”œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”¼â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”¤");
        System.out.println("   â”‚ Serial GC       â”‚ Single thread, small heaps             â”‚");
        System.out.println("   â”‚ -XX:+UseSerialGCâ”‚ Good for: Single CPU, small apps       â”‚");
        System.out.println("   â”œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”¼â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”¤");
        System.out.println("   â”‚ Parallel GC     â”‚ Multiple threads, throughput focus     â”‚");
        System.out.println("   â”‚ -XX:+UseParallelGCâ”‚ Good for: Batch processing           â”‚");
        System.out.println("   â”œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”¼â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”¤");
        System.out.println("   â”‚ G1 GC (Default) â”‚ Balanced throughput & latency          â”‚");
        System.out.println("   â”‚ -XX:+UseG1GC    â”‚ Good for: General purpose (Java 9+)    â”‚");
        System.out.println("   â”œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”¼â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”¤");
        System.out.println("   â”‚ ZGC             â”‚ Ultra-low latency (<10ms pause)        â”‚");
        System.out.println("   â”‚ -XX:+UseZGC     â”‚ Good for: Large heaps, low latency     â”‚");
        System.out.println("   â”œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”¼â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”¤");
        System.out.println("   â”‚ Shenandoah      â”‚ Low pause time                         â”‚");
        System.out.println("   â”‚                 â”‚ Good for: Low latency requirements     â”‚");
        System.out.println("   â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”´â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜");
        
        System.out.println("\nğŸ“Œ When to use what?");
        System.out.println("   â€¢ Small apps, single CPU â†’ Serial GC");
        System.out.println("   â€¢ Batch processing, throughput â†’ Parallel GC");
        System.out.println("   â€¢ General purpose â†’ G1 GC (default in Java 9+)");
        System.out.println("   â€¢ Very large heaps, low latency â†’ ZGC");
        System.out.println();
    }

    /*
     * â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•
     * MEMORY LEAKS
     * â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•
     */
    static void memoryLeaks() {
        System.out.println("5ï¸âƒ£ MEMORY LEAKS IN JAVA");
        System.out.println("â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€\n");
        
        System.out.println("Memory leak = Objects kept in memory unintentionally\n");
        
        System.out.println("A) Common Causes:");
        
        System.out.println("\n   1. Unclosed Resources:");
        System.out.println("      InputStream is = new FileInputStream(\"file\");");
        System.out.println("      // Forgot to close! Use try-with-resources!");
        
        System.out.println("\n   2. Static Collections:");
        System.out.println("      static List<Object> cache = new ArrayList<>();");
        System.out.println("      cache.add(object);  // Never removed, keeps growing!");
        
        System.out.println("\n   3. Listeners not removed:");
        System.out.println("      button.addActionListener(listener);");
        System.out.println("      // Forgot to removeActionListener!");
        
        System.out.println("\n   4. Inner class holding outer reference:");
        System.out.println("      class Outer {");
        System.out.println("          class Inner {}  // Holds implicit ref to Outer");
        System.out.println("      }");
        
        System.out.println("\n   5. ThreadLocal not cleaned:");
        System.out.println("      threadLocal.set(value);");
        System.out.println("      // Forgot threadLocal.remove()!");
        
        System.out.println("\nB) How to Detect:");
        System.out.println("   â€¢ Monitor heap usage over time");
        System.out.println("   â€¢ Use profilers: VisualVM, JProfiler, YourKit");
        System.out.println("   â€¢ Heap dumps: jmap -dump:format=b,file=heap.bin <pid>");
        System.out.println("   â€¢ Analyze with: Eclipse MAT, jhat");
        System.out.println();
    }

    /*
     * â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•
     * REFERENCE TYPES
     * â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•
     */
    static void referenceTypes() {
        System.out.println("6ï¸âƒ£ REFERENCE TYPES (java.lang.ref)");
        System.out.println("â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€\n");
        
        System.out.println("   â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”¬â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”");
        System.out.println("   â”‚  Reference Type â”‚  GC Behavior                        â”‚");
        System.out.println("   â”œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”¼â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”¤");
        System.out.println("   â”‚ Strong          â”‚ NEVER collected (normal reference)  â”‚");
        System.out.println("   â”‚ Object o = new..â”‚                                     â”‚");
        System.out.println("   â”œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”¼â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”¤");
        System.out.println("   â”‚ Soft            â”‚ Collected when memory is LOW        â”‚");
        System.out.println("   â”‚ SoftReference<T>â”‚ Good for: Caches                    â”‚");
        System.out.println("   â”œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”¼â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”¤");
        System.out.println("   â”‚ Weak            â”‚ Collected at NEXT GC                â”‚");
        System.out.println("   â”‚ WeakReference<T>â”‚ Good for: Canonicalizing maps       â”‚");
        System.out.println("   â”œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”¼â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”¤");
        System.out.println("   â”‚ Phantom         â”‚ Collected, used for cleanup actions â”‚");
        System.out.println("   â”‚ PhantomRef<T>   â”‚ Good for: Pre-mortem cleanup        â”‚");
        System.out.println("   â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”´â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜");
        
        System.out.println("\nExample:");
        System.out.println("   // Soft reference - good for caches");
        System.out.println("   SoftReference<byte[]> cache = new SoftReference<>(new byte[1024]);");
        System.out.println("   byte[] data = cache.get();  // May return null if GC'd");
        System.out.println("   if (data == null) {");
        System.out.println("       data = loadFromDisk();  // Reload");
        System.out.println("   }");
        
        System.out.println("\n   // Weak reference - for WeakHashMap");
        System.out.println("   WeakReference<Person> weakRef = new WeakReference<>(person);");
        System.out.println("   person = null;  // Now weakRef.get() will return null after GC");
        System.out.println();
    }

    /*
     * â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•
     * JVM TUNING
     * â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•
     */
    static void jvmTuning() {
        System.out.println("7ï¸âƒ£ JVM TUNING OPTIONS");
        System.out.println("â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€\n");
        
        System.out.println("A) Heap Size:");
        System.out.println("   -Xms512m     Initial heap size (512 MB)");
        System.out.println("   -Xmx2g       Maximum heap size (2 GB)");
        System.out.println("   Tip: Set Xms = Xmx to avoid resizing overhead");
        
        System.out.println("\nB) Stack Size:");
        System.out.println("   -Xss1m       Thread stack size (1 MB)");
        
        System.out.println("\nC) Metaspace:");
        System.out.println("   -XX:MetaspaceSize=256m");
        System.out.println("   -XX:MaxMetaspaceSize=512m");
        
        System.out.println("\nD) GC Selection:");
        System.out.println("   -XX:+UseG1GC           G1 (default Java 9+)");
        System.out.println("   -XX:+UseZGC            ZGC (low latency)");
        System.out.println("   -XX:+UseParallelGC     Parallel (throughput)");
        
        System.out.println("\nE) GC Logging:");
        System.out.println("   -Xlog:gc*:file=gc.log");
        
        System.out.println("\nF) Useful Commands:");
        System.out.println("   jps           List Java processes");
        System.out.println("   jstat -gc pid GC statistics");
        System.out.println("   jmap -heap pid Heap info");
        System.out.println("   jstack pid   Thread dump");
        
        System.out.println("\nG) Example Production Settings:");
        System.out.println("   java -Xms4g -Xmx4g \\");
        System.out.println("        -XX:+UseG1GC \\");
        System.out.println("        -XX:MaxGCPauseMillis=200 \\");
        System.out.println("        -Xlog:gc*:file=gc.log \\");
        System.out.println("        -jar app.jar");
        
        printSummary();
    }
    
    static void printSummary() {
        System.out.println("\nâ•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•");
        System.out.println("  SUMMARY: Memory & Garbage Collection");
        System.out.println("â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•");
        System.out.println();
        System.out.println("  ğŸ“Œ STACK: Method calls, local vars, references (thread-specific)");
        System.out.println("  ğŸ“Œ HEAP: Objects, arrays (shared, GC managed)");
        System.out.println("  ğŸ“Œ Young Gen: Eden + Survivors (Minor GC)");
        System.out.println("  ğŸ“Œ Old Gen: Long-lived objects (Major GC)");
        System.out.println("  ğŸ“Œ G1 GC: Default in Java 9+, balanced performance");
        System.out.println();
        System.out.println("  ğŸ¯ INTERVIEW TIP:");
        System.out.println("     \"Stack stores method calls and local variables, per thread.");
        System.out.println("      Heap stores objects, shared among threads, GC managed.");
        System.out.println("      Objects become eligible for GC when no references exist.");
        System.out.println("      G1 is default GC from Java 9. Use -Xms/-Xmx for heap size.\"");
        System.out.println("â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•");
    }
}

/*
 * â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•
 * INTERVIEW QUESTIONS
 * â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•
 * 
 * Q1: What is the difference between Stack and Heap?
 * A1: Stack: Thread-specific, stores method calls/local vars, LIFO, auto-cleaned
 *     Heap: Shared, stores objects, garbage collected, larger
 * 
 * Q2: When is an object eligible for Garbage Collection?
 * A2: When no live thread can reach it (no references pointing to it).
 *     Can happen by: nulling ref, reassigning, method exit, island of isolation.
 * 
 * Q3: Can we force Garbage Collection?
 * A3: No! System.gc() is only a suggestion/hint to JVM.
 *     JVM decides when to actually run GC.
 * 
 * Q4: What is the difference between Minor GC and Major GC?
 * A4: Minor GC: Cleans Young Generation (Eden + Survivors), fast, frequent
 *     Major GC: Cleans Old Generation, slow, less frequent (also called Full GC)
 * 
 * Q5: What causes OutOfMemoryError?
 * A5: - Heap space: Too many objects, memory leak
 *     - Metaspace: Too many classes loaded
 *     - GC overhead: GC running too much with little reclaim
 * 
 * Q6: What is the default GC in Java 11/17/21?
 * A6: G1 GC (Garbage First) - balanced throughput and latency.
 *     Good for most applications.
 * 
 * Q7: How to detect memory leaks?
 * A7: - Monitor heap growth over time
 *     - Use profilers (VisualVM, JProfiler)
 *     - Analyze heap dumps with Eclipse MAT
 *     - Look for growing collections, unclosed resources
 */
